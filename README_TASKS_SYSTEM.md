# 🧠 מערכת ניהול משימות חכמה

## 🎯 סקירה כללית

מערכת ניהול משימות חכמה עם ניתוח מבוסס AI, המלצות מותאמות אישית, וזיהוי דפוסים של עבודה והפרעות.

## ✨ תכונות עיקריות

### 1. לוח משימות (Task Board)
- **Kanban Board** עם 3 עמודות: ממתין | בביצוע | הושלם
- **קטגוריות היררכיות** - קטגוריות ותת-קטגוריות ללא הגבלה
- **עדיפויות** - נמוך, בינוני, גבוה, דחוף
- **סינון מתקדם** - לפי קטגוריה, סטטוס, תאריך
- **סטטיסטיקות מהירות** - סה"כ משימות, פעילות, הושלמו היום

### 2. לוח שנה (Task Calendar)
- **תצוגה חודשית** - כל המשימות לפי תאריכים
- **אחוז הצלחה יומי** - ניתוח ביצועים לכל יום
- **ניווט חודשי** - מעבר חלק בין חודשים
- **קוד צבעים** - pending (כחול), in_progress (צהוב), completed (ירוק)

### 3. ניתוח חכם (Analytics)
#### דפוסים לפי ימים
- 📊 אחוז הצלחה לכל יום בשבוע
- 🏆 היום הכי טוב והכי חלש
- ⚡ רמות אנרגיה ממוצעות
- 🎯 רמות קושי ממוצעות

#### דפוסים לפי שעות
- ⏰ ניתוח ביצועים לכל שעה ביום
- ✅ השעות הכי פרודוקטיביות
- 📉 השעות עם הכי הרבה נפילות
- 💡 המלצות מותאמות אישית

#### רצפים והישגים
- 🔥 רצף נוכחי של השלמות
- 🏅 הרצף הארוך ביותר
- 📈 מעקב אחר התקדמות

#### המלצות חכמות
- 🤖 המלצות מבוססות AI
- 🎯 זיהוי הימים והשעות הטובים ביותר
- 🚫 זיהוי זמנים עם הרבה נפילות
- 💪 הצעות שיפור מותאמות אישית

## 🗄️ ארכיטקטורה

### Database Schema
```sql
-- 4 טבלאות ראשיות:
task_categories (קטגוריות עם parent_id להיררכיה)
tasks (משימות עם מידע מלא)
task_completions (רישום השלמות + דירוגים)
task_failures (רישום נפילות + הקשר)

-- 3 טריגרים אוטומטיים:
1. update_updated_at - עדכון אוטומטי של timestamps
2. extract_task_context - שליפת יום ושעה אוטומטית
3. track_task_failure - רישום נפילות כשמשימה מבוטלת
```

### Frontend Components
```
src/
├── hooks/
│   ├── useTasks.tsx (230 שורות)
│   └── useTaskAnalytics.tsx (280 שורות)
├── components/
│   ├── TaskBoard.tsx (489 שורות)
│   ├── TaskCalendar.tsx (150 שורות)
│   └── TaskAnalytics.tsx (330+ שורות)
└── pages/
    └── Tasks.tsx (עמוד ראשי עם 3 טאבים)
```

## 🚀 התקנה והפעלה

### 1. הרצת המיגרציה
```bash
# בקונסול של Supabase SQL Editor:
# העתק את התוכן של:
supabase/migrations/20251225_smart_tasks_system.sql

# או דרך CLI:
supabase db push
```

### 2. ניווט למערכת
```
http://localhost:5173/tasks
```

### 3. שימוש בממשק
1. **לוח משימות** - יצירת משימות, קטגוריות, וניהול סטטוס
2. **לוח שנה** - תצוגת משימות לפי תאריכים
3. **ניתוח** - צפייה בדפוסים והמלצות

## 📊 דוגמאות שימוש

### יצירת משימה
```typescript
const { addTask } = useTasks();

addTask.mutate({
  title: "פגישה עם לקוח",
  description: "דיון על פרויקט חדש",
  category_id: "uuid-של-קטגוריה",
  due_date: "2024-01-15",
  due_time: "14:00",
  priority: "high",
  estimated_duration: 60
});
```

### השלמת משימה עם דירוגים
```typescript
const { completeTask } = useTasks();

completeTask.mutate({
  taskId: "uuid-של-משימה",
  energy_level: 4,      // 1-5
  difficulty: 3,        // 1-5
  actual_duration: 75   // דקות
});
```

### קריאת ניתוח חכם
```typescript
const { analytics } = useTaskAnalytics();

console.log(analytics.bestDay);        // "יום ראשון"
console.log(analytics.worstDay);       // "יום שישי"
console.log(analytics.bestHours);      // [9, 10, 11]
console.log(analytics.recommendations); // ["..."]
```

## 🎨 עיצוב וממשק

### קוד צבעים
- 🔵 **Pending** - משימות ממתינות
- 🟡 **In Progress** - בביצוע
- 🟢 **Completed** - הושלם
- 🔴 **Cancelled** - בוטל

### Badges
- 🏆 **הכי טוב** - ימים/שעות עם הצלחה גבוהה
- ⚠️ **הכי חלש** - ימים/שעות עם נפילות
- 🔥 **רצף** - הישגים רצופים

## 🧪 בדיקות

### טסטים נדרשים
```bash
# בדיקת CRUD בסיסי
- יצירת משימה ✓
- עדכון משימה ✓
- השלמת משימה ✓
- מחיקת משימה ✓

# בדיקת קטגוריות
- יצירת קטגוריה ראשית ✓
- יצירת תת-קטגוריה ✓
- סינון לפי קטגוריה ✓

# בדיקת ניתוח
- חישוב דפוסים יומיים ✓
- חישוב דפוסים שעתיים ✓
- יצירת המלצות ✓
```

## 🔮 תכונות עתידיות

### גרסה 1.1
- [ ] Drag & Drop בין עמודות
- [ ] עריכת משימות ישירות מהלוח
- [ ] חיפוש וסינון מתקדם
- [ ] ייצוא נתונים ל-CSV/Excel

### גרסה 1.2
- [ ] משימות חוזרות (Recurring)
- [ ] תזכורות (Reminders)
- [ ] משימות משותפות (Collaboration)
- [ ] תבניות משימות (Templates)

### גרסה 2.0
- [ ] אינטגרציה עם Calendar חיצוני
- [ ] יצירת משימות דרך AI Coach
- [ ] חיזוי זמני השלמה מבוסס ML
- [ ] ניתוח רגשי ומצב רוח

## 📝 הערות טכניות

### Performance
- **Indexes** על כל השדות החשובים
- **React Query Caching** לתגובה מיידית
- **Optimistic Updates** לחוויית משתמש חלקה

### Security
- **RLS Policies** על כל הטבלאות
- **User Isolation** - כל משתמש רואה רק את המשימות שלו
- **Input Validation** בצד הקליינט והשרת

### Scalability
- **Pagination** למשימות רבות (ניתן להוסיף)
- **Lazy Loading** לתמונות ונספחים (תכונה עתידית)
- **Batch Operations** לפעולות מרובות

## 🤝 תרומה

רוצה לתרום? מוזמן!
1. Fork את הפרויקט
2. צור branch חדש
3. Commit את השינויים
4. Push ל-branch
5. פתח Pull Request

## 📄 רישיון

MIT License - ראה LICENSE לפרטים

---

**נוצר על ידי**: Spark Track Team  
**תאריך**: דצמבר 2024  
**גרסה**: 1.0.0
